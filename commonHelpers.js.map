{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport izitoast from 'izitoast';\n// import 'izitoast/dist/css/izitoast.min.css';\n// import 'flatpickr/dist/flatpickr.min.css';\nconst startBtn = document.querySelector('button[data-start]');\nconst datetimePicker = document.querySelector('#datetime-picker');\n\nstartBtn.setAttribute('disabled', true);\n\nconst timer = document.querySelector('.timer');\nconst iconError = './img/icon-error.svg'\n\n\nconst timerValues = {\n  days: timer.querySelector('[data-days]'),\n  hours: timer.querySelector('[data-hours]'),\n  minutes: timer.querySelector('[data-minutes]'),\n  seconds: timer.querySelector('[data-seconds]'),\n};\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    checkData(selectedDates[0]);\n  },\n};\nflatpickr(datetimePicker, options);\n\nconst izitoastOptions = {\n  title: 'Error',\n  message: 'Illegal operation',\n  position: 'topRight',\n  backgroundColor: '#EF4040',\n  theme: 'dark',\n  icoÑ‚Url: iconError,\n};\nconst checkData = data => {\n  if (data.getTime() > Date.now()) {\n    userSelectedDate = data;\n    startBtn.removeAttribute('disabled');\n  } else {\n    startBtn.setAttribute('disabled', true);\n    izitoast.error(izitoastOptions);\n  }\n};\n\nconst addLeadingZero = value => {\n  return String(value).padStart(2, '0');\n};\n\nconst setValues = () => {\n  let { days, hours, minutes, seconds } = convertMs(\n    userSelectedDate.getTime() - Date.now()\n  );\n  if (days < 0 && hours < 0 && minutes < 0 && seconds < 0) {\n    return null;\n  }\n\n  timerValues.days.textContent = addLeadingZero(days);\n  timerValues.hours.textContent = addLeadingZero(hours);\n  timerValues.minutes.textContent = addLeadingZero(minutes);\n  timerValues.seconds.textContent = addLeadingZero(seconds);\n  return true;\n};\n\nconst stopTimer = intervalId => {\n  clearInterval(intervalId);\n};\n\nconst start = () => {\n  datetimePicker.setAttribute('disabled', true);\n  startBtn.setAttribute('disabled', true);\n\n  setValues();\n  const timerIntervalId = setInterval(() => {\n    setValues() ? setValues() : stopTimer(timerIntervalId);\n  }, 1000);\n};\n\nstartBtn.addEventListener('click', start);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["startBtn","datetimePicker","timer","iconError","timerValues","userSelectedDate","options","selectedDates","checkData","flatpickr","izitoastOptions","data","izitoast","addLeadingZero","value","setValues","days","hours","minutes","seconds","convertMs","stopTimer","intervalId","start","timerIntervalId","ms"],"mappings":"+IAIA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAiB,SAAS,cAAc,kBAAkB,EAEhED,EAAS,aAAa,WAAY,EAAI,EAEtC,MAAME,EAAQ,SAAS,cAAc,QAAQ,EACvCC,EAAY,uBAGZC,EAAc,CAClB,KAAMF,EAAM,cAAc,aAAa,EACvC,MAAOA,EAAM,cAAc,cAAc,EACzC,QAASA,EAAM,cAAc,gBAAgB,EAC7C,QAASA,EAAM,cAAc,gBAAgB,CAC/C,EAEA,IAAIG,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAUD,EAAc,CAAC,CAAC,CAC3B,CACH,EACAE,EAAUR,EAAgBK,CAAO,EAEjC,MAAMI,EAAkB,CACtB,MAAO,QACP,QAAS,oBACT,SAAU,WACV,gBAAiB,UACjB,MAAO,OACP,QAASP,CACX,EACMK,EAAYG,GAAQ,CACpBA,EAAK,QAAO,EAAK,KAAK,IAAG,GAC3BN,EAAmBM,EACnBX,EAAS,gBAAgB,UAAU,IAEnCA,EAAS,aAAa,WAAY,EAAI,EACtCY,EAAS,MAAMF,CAAe,EAElC,EAEMG,EAAiBC,GACd,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAGhCC,EAAY,IAAM,CACtB,GAAI,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGC,EACtCf,EAAiB,QAAO,EAAK,KAAK,IAAK,CAC3C,EACE,OAAIW,EAAO,GAAKC,EAAQ,GAAKC,EAAU,GAAKC,EAAU,EAC7C,MAGTf,EAAY,KAAK,YAAcS,EAAeG,CAAI,EAClDZ,EAAY,MAAM,YAAcS,EAAeI,CAAK,EACpDb,EAAY,QAAQ,YAAcS,EAAeK,CAAO,EACxDd,EAAY,QAAQ,YAAcS,EAAeM,CAAO,EACjD,GACT,EAEME,EAAYC,GAAc,CAC9B,cAAcA,CAAU,CAC1B,EAEMC,EAAQ,IAAM,CAClBtB,EAAe,aAAa,WAAY,EAAI,EAC5CD,EAAS,aAAa,WAAY,EAAI,EAEtCe,IACA,MAAMS,EAAkB,YAAY,IAAM,CACxCT,EAAW,EAAGA,EAAS,EAAKM,EAAUG,CAAe,CACtD,EAAE,GAAI,CACT,EAEAxB,EAAS,iBAAiB,QAASuB,CAAK,EAExC,SAASH,EAAUK,EAAI,CAQrB,MAAMT,EAAO,KAAK,MAAMS,EAAK,KAAG,EAE1BR,EAAQ,KAAK,MAAOQ,EAAK,MAAO,IAAI,EAEpCP,EAAU,KAAK,MAAQO,EAAK,MAAO,KAAQ,GAAM,EAEjDN,EAAU,KAAK,MAASM,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAT,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}
{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport izitoast from 'izitoast';\n// import 'flatpickr/dist/flatpickr.min.css';\n// import 'izitoast/dist/css/izitoast.min.css';\nconst startBtn = document.querySelector('button[data-start]');\nconst datetimePicker = document.querySelector('#datetime-picker');\n\nstartBtn.setAttribute('disabled', true);\n\nconst timer = document.querySelector('.timer');\n\nconst timerValues = {\n  days: timer.querySelector('[data-days]'),\n  hours: timer.querySelector('[data-hours]'),\n  minutes: timer.querySelector('[data-minutes]'),\n  seconds: timer.querySelector('[data-seconds]'),\n};\n\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    checkData(selectedDates[0]);\n  },\n};\nflatpickr(datetimePicker, options);\n\nconst iconError = `<symbol id=\"icon-error\" viewBox=\"0 0 32 32\">\n<path d=\"M9.080 0.292c0.187-0.187 0.441-0.292 0.706-0.292h12.428c0.265 0 0.519 0.105 0.706 0.292l8.788 8.788c0.187 0.187 0.292 0.441 0.292 0.706v12.428c0 0.265-0.105 0.519-0.292 0.706l-8.788 8.788c-0.187 0.187-0.441 0.292-0.706 0.292h-12.428c-0.265 0-0.519-0.105-0.706-0.292l-8.788-8.788c-0.187-0.187-0.292-0.441-0.292-0.706v-12.428c0-0.265 0.105-0.519 0.292-0.706l8.788-8.788zM10.2 2l-8.2 8.2v11.6l8.2 8.2h11.6l8.2-8.2v-11.6l-8.2-8.2h-11.6z\"></path>\n<path d=\"M9.292 9.292c0.093-0.093 0.203-0.167 0.325-0.217s0.252-0.076 0.383-0.076c0.132 0 0.262 0.026 0.383 0.076s0.232 0.124 0.325 0.217l5.292 5.294 5.292-5.294c0.093-0.093 0.203-0.167 0.325-0.217s0.252-0.076 0.383-0.076c0.131 0 0.262 0.026 0.383 0.076s0.232 0.124 0.325 0.217c0.093 0.093 0.167 0.203 0.217 0.325s0.076 0.252 0.076 0.383-0.026 0.262-0.076 0.383c-0.050 0.121-0.124 0.232-0.217 0.325l-5.294 5.292 5.294 5.292c0.093 0.093 0.167 0.203 0.217 0.325s0.076 0.252 0.076 0.383-0.026 0.262-0.076 0.383c-0.050 0.121-0.124 0.232-0.217 0.325s-0.203 0.167-0.325 0.217c-0.121 0.050-0.252 0.076-0.383 0.076s-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217l-5.292-5.294-5.292 5.294c-0.093 0.093-0.203 0.167-0.325 0.217s-0.252 0.076-0.383 0.076-0.262-0.026-0.383-0.076c-0.121-0.050-0.232-0.124-0.325-0.217s-0.167-0.203-0.217-0.325c-0.050-0.121-0.076-0.252-0.076-0.383s0.026-0.262 0.076-0.383c0.050-0.121 0.124-0.232 0.217-0.325l5.294-5.292-5.294-5.292c-0.093-0.093-0.167-0.203-0.217-0.325s-0.076-0.252-0.076-0.383c0-0.132 0.026-0.262 0.076-0.383s0.124-0.232 0.217-0.325z\"></path>\n</symbol>\n`;\nizitoast.settings({\n  title: 'Error',\n  message: 'Illegal operation',\n  position: 'topRight',\n  backgroundColor: '#EF4040',\n  iconColor: 'white',\n  theme: 'dark',\n});\nconst checkData = data => {\n  if (data.getTime() > Date.now()) {\n    userSelectedDate = data;\n    startBtn.removeAttribute('disabled');\n  } else {\n    startBtn.setAttribute('disabled', true);\n    izitoast.error();\n  }\n};\n\nconst addLeadingZero = value => {\n  return String(value).padStart(2, '0');\n};\n\nconst setValues = () => {\n  let { days, hours, minutes, seconds } = convertMs(\n    userSelectedDate.getTime() - Date.now()\n  );\n  if (days < 0 && hours < 0 && minutes < 0 && seconds < 0) {\n    return null;\n  }\n\n  timerValues.days.textContent = addLeadingZero(days);\n  timerValues.hours.textContent = addLeadingZero(hours);\n  timerValues.minutes.textContent = addLeadingZero(minutes);\n  timerValues.seconds.textContent = addLeadingZero(seconds);\n  return true;\n};\n\nconst stopTimer = intervalId => {\n  clearInterval(intervalId);\n};\n\nconst start = () => {\n  datetimePicker.setAttribute('disabled', true);\n  startBtn.setAttribute('disabled', true);\n\n  setValues();\n  const timerIntervalId = setInterval(() => {\n    setValues() ? setValues() : stopTimer(timerIntervalId);\n  }, 1000);\n};\n\nstartBtn.addEventListener('click', start);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n"],"names":["startBtn","datetimePicker","timer","timerValues","userSelectedDate","options","selectedDates","checkData","flatpickr","izitoast","data","addLeadingZero","value","setValues","days","hours","minutes","seconds","convertMs","stopTimer","intervalId","start","timerIntervalId","ms"],"mappings":"iyBAIA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAiB,SAAS,cAAc,kBAAkB,EAEhED,EAAS,aAAa,WAAY,EAAI,EAEtC,MAAME,EAAQ,SAAS,cAAc,QAAQ,EAEvCC,EAAc,CAClB,KAAMD,EAAM,cAAc,aAAa,EACvC,MAAOA,EAAM,cAAc,cAAc,EACzC,QAASA,EAAM,cAAc,gBAAgB,EAC7C,QAASA,EAAM,cAAc,gBAAgB,CAC/C,EAEA,IAAIE,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAUD,EAAc,CAAC,CAAC,CAC3B,CACH,EACAE,EAAUP,EAAgBI,CAAO,EAOjCI,EAAS,SAAS,CAChB,MAAO,QACP,QAAS,oBACT,SAAU,WACV,gBAAiB,UACjB,UAAW,QACX,MAAO,MACT,CAAC,EACD,MAAMF,EAAYG,GAAQ,CACpBA,EAAK,QAAO,EAAK,KAAK,IAAG,GAC3BN,EAAmBM,EACnBV,EAAS,gBAAgB,UAAU,IAEnCA,EAAS,aAAa,WAAY,EAAI,EACtCS,EAAS,MAAK,EAElB,EAEME,EAAiBC,GACd,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,EAGhCC,EAAY,IAAM,CACtB,GAAI,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGC,EACtCd,EAAiB,QAAO,EAAK,KAAK,IAAK,CAC3C,EACE,OAAIU,EAAO,GAAKC,EAAQ,GAAKC,EAAU,GAAKC,EAAU,EAC7C,MAGTd,EAAY,KAAK,YAAcQ,EAAeG,CAAI,EAClDX,EAAY,MAAM,YAAcQ,EAAeI,CAAK,EACpDZ,EAAY,QAAQ,YAAcQ,EAAeK,CAAO,EACxDb,EAAY,QAAQ,YAAcQ,EAAeM,CAAO,EACjD,GACT,EAEME,EAAYC,GAAc,CAC9B,cAAcA,CAAU,CAC1B,EAEMC,EAAQ,IAAM,CAClBpB,EAAe,aAAa,WAAY,EAAI,EAC5CD,EAAS,aAAa,WAAY,EAAI,EAEtCa,IACA,MAAMS,EAAkB,YAAY,IAAM,CACxCT,EAAW,EAAGA,EAAS,EAAKM,EAAUG,CAAe,CACtD,EAAE,GAAI,CACT,EAEAtB,EAAS,iBAAiB,QAASqB,CAAK,EAExC,SAASH,EAAUK,EAAI,CAQrB,MAAMT,EAAO,KAAK,MAAMS,EAAK,KAAG,EAE1BR,EAAQ,KAAK,MAAOQ,EAAK,MAAO,IAAI,EAEpCP,EAAU,KAAK,MAAQO,EAAK,MAAO,KAAQ,GAAM,EAEjDN,EAAU,KAAK,MAASM,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAT,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}